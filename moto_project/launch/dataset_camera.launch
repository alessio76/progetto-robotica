<launch>
  <arg name="model_name" default="only_rgbd_camera.urdf.xacro" />
  <arg name="model" default="$(find motoman_description)/robots/sia5/my_urdf/$(arg model_name)" />
  <arg name="paused" default="false" />
  <arg name="use_sim_time" default="true" />
  <arg name="gazebo_gui" default="true" />
  <arg name="headless" default="false" />
  <arg name="debug" default="false" />
  <arg name="world_name" default="camera.world" />
  <arg name="world_path" default="$(find moto_project)/worlds/$(arg world_name)" />
  

  <!-- We resume the logic in empty_world.launch, changing only the name of the world to be launched -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="world_name" value="$(arg world_path)" />
    <arg name="debug" value="$(arg debug)" />
    <arg name="gui" value="$(arg gazebo_gui)" />
    <arg name="paused" value="$(arg paused)" />
    <arg name="use_sim_time" value="$(arg use_sim_time)" />
    <arg name="headless" value="$(arg headless)" />
  </include>

   <!-- topic to publish the images of the camera -->
  <arg name="image_topic" default="/sia5/rgbd/color/image_raw" />
  <arg name="depth_topic" default="/sia5/rgbd/depth/image_raw" />
  <arg name="point_cloud_topic" default="/sia5/rgbd/depth/points" />
  <param name="robot_description" command="$(find xacro)/xacro $(arg model)" />
	
  <!-- Run a python script to the send a service call to gazebo_ros to spawn a URDF model -->
  <node name="urdf_spawner" pkg="gazebo_ros" type="spawn_model" respawn="false" output="screen"
    args="-urdf -model rgbd_camera -param robot_description" />
    
  <!-- Run a python script to the send a service call to gazebo_ros to spawn a URDF model 
  <node
    name="urdf_spawner3" pkg="gazebo_ros" type="spawn_model" respawn="false" output="screen" 
    args="-file $(find motoman_description)/urdf/objects/coffee/coffee_can.urdf -urdf -model coffee_can " /> -->

   <node name="image_viewer" pkg="rqt_image_view" type="rqt_image_view" 
  args="$(arg image_topic)" />
    
    <node name="depth_viewer" pkg="rqt_image_view" type="rqt_image_view" 
    args="$(arg depth_topic)" />
    
    <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" respawn="false" output="screen"/>
    
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"
    respawn="false" output="screen">
  </node>
  <!-- ros_control motoman launch file -->
</launch>
